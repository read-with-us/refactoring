[⬅️ 11장](https://github.com/read-with-us/refactoring/tree/main/ch11) | [1장 ➡️](https://github.com/read-with-us/refactoring/tree/main/ch01)

# 12장 상속 다루기 (1)

- [12.1 메서드 올리기](#121-메서드-올리기)
- [12.2 필드 올리기](#122-필드-올리기)
- [12.3 생성자 본문 올리기](#123-생성자-본문-올리기)
- [12.4 메서드 내리기](#124-메서드-내리기)
- [12.5 필드 내리기](#125-필드-내리기)
- [12.6 타입 코드를 서브클래스로 바꾸기](#126-타입-코드를-서브클래스로-바꾸기)
- [12.7 서브클래스 제거하기](#127-서브클래스-제거하기)

> **Note**
>
> '상속 다루기' 챕터는 다음 질문을 중심으로 읽어나가시면 좋습니다.
>
> 1. 언제 상속해야 하는가
> 2. 슈퍼클래스와 서브클래스의 요소를 어떻게 정리해야 하는가
> 3. 상속을 오용했다면 어떤 대안이 있는가

## 12.1 메서드 올리기

p.476
> 메서드 올리기를 적용하기 가장 쉬운 상황은 메서드들의 본문 코드가 똑같을 때다. 이럴 땐 그냥 복사해 붙여넣으면 끝이다.

p.477
> 메서드 올리기를 적용하기에 가장 이상하고 복잡한 상황은 해당 메서드의 본문에서 참조하는 필드들이 서브클래스에만 있는 경우다. 이런 경우라면 필드들 먼저 슈퍼클래스로 올린 후에 메서드를 올려야 한다.

## 12.2 필드 올리기

p.479
> 서브클래스들이 독립적으로 개발되었거나 뒤늦게 하나의 계층구조로 리펙터링된 경우라면 일부 기능이 중복되어 있을 때가 왕왕 있다. 특히 필드가 중복되기 쉽다.
> 필드들이 비슷한 방식으로 쓰인다고 판단되면 슈퍼클래스로 끌어올리자.
> 이렇게 하면 두 가지 중복을 줄일 수 있다. 첫째, 데이터 중복 선언을 없앨 수 있다. 둘째, 해당 필드를 사용하는 동작을 서브클래스에서 슈퍼클래스로 옮길 수 있다.

## 12.3 생성자 본문 올리기

p.481
> 서브클래스들에서 기능이 같은 메서드들을 발견하면 함수 추출하기와 메서드 올리기를 차례로 적용하여 말끔히 슈퍼클래스로 옮기곤 한다. 그런데 그 메서드가 생성자라면 스텝이 꼬인다. 생성자는 할 수 있는 일과 호출 순서에 제약이 있기 때문에 조금 다른 식으로 접근해야 한다.

## 12.4 메서드 내리기

p.485
> 특정 서브클래스 하나(혹은 소수)와만 관련된 메서드는 슈퍼클래스에서 제거하고 해당 서브클래스(들)에 추가하는 편이 깔끔하다. 다만, 이 리펙터링은 해당 기능을 제공하는 서브클래스가 정확히 무엇인지를 호출자가 알고 있을 때만 적용할 수 있다.

## 12.5 필드 내리기

p.486
> 서브클래스 하나(혹은 소수)에서만 사용하는 필드는 해당 서브클래스(들)로 옮긴다.

💡 **의견**
- 왼쪽 예문에는 private이었는데 오른쪽 예문에선 왜 protected가 되었을까요? 🤔
- 키워드 protected (TypeScript) https://www.typescriptlang.org/docs/handbook/2/classes.html#protected


## 12.6 타입 코드를 서브클래스로 바꾸기

p.487
> 소프트웨어 시스템에서는 비슷한 대상들을 특정 특성에 따라 구분해야 할 때가 자주 있다. 이런 일을 다루는 수단으로는 타입 코드Type Code 필드가 있다. 타입코드는 프로그래밍 언어에 따라 열거형이나 심볼, 문자열, 숫자 등으로 표현하며, 외부 서비스가 제공하는 데이터를 다루려 할 때 딸려오는 일이 흔하다. 
> 타입 코드만으로도 특별히 불편한 상황은 별로 없지만 그 이상의 무언가가 필요할 때가 있다. 여기서 '그 이상'이라 하면 바로 서브클래스를 가리킨다. 
> 서브클래스는 두 가지 면에서 특히 매력적이다. 첫째, 조건에 따라 다르게 동작하도록 해주는 다형성을 제공한다. 두 번째 매력은 특정 타입에서만 의미가 있는 값을 사용하는 필드나 메서드가 있을 때 발현된다.

💡 **의견**
- 디자인패턴
  - 상태 패턴: https://refactoring.guru/ko/design-patterns/state
  - 전략 패턴: https://refactoring.guru/ko/design-patterns/strategy

## 12.7 서브클래스 제거하기

p.495
> 서브클래스로 만든 변종이 다른 모듈로 이동하거나 완전히 사라지기도 하면서 가치가 바래지기도 한다. 서브클래스는 결국 한 번도 활용되지 않기도 하며, 때론 서브클래스를 필요로 하지 않는 방식으로 만들어진 기능에서만 쓰이기도 한다.
> 더 이상 쓰이지 않는 서브클래스와 마주하는 프로그래머는 가치 없는 것을 이해하느라 에너지를 낭비할 것이다. 이런 정도까지 되면 서브클래스를 슈퍼클래스의 필드로 대체해 제거하는 게 최선이다.

<br>

[⬅️ 11장](https://github.com/read-with-us/refactoring/tree/main/ch11) | [⬆️ 위로](#12장-상속-다루기-1) | [1장 ➡️](https://github.com/read-with-us/refactoring/tree/main/ch01)
